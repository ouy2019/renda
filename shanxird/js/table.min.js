window.onload=function(){barData=[];brokenData=[];pieData=[];tableData=[];uuidArray=[];bar01=[];bar02=[];pie01=[];pie02=[];line01=[];line02=[];tip="";var Sign="userId="+getQueryString("userId")+"&timeIntervalStr="+timrstamp()+"&userToken="+getQueryString("token");
timeIntervalStr=timrstamp();userId=getQueryString("userId");appSignNumber=SHA2(Sign).toString();$(".yearSelect").text(localStorage.getItem("year"));$("#title").text(getQueryString("sectionName"));
$(".sectionText").text(getQueryString("sectionName"));sectionId=getQueryString("sectionId");dataUrl="";var ipSp=localStorage.getItem("ipSeach");var headLength="";
dataLoad();function dataLoad(){$.ajax({url:"http://112.74.96.24:8082/mt-gzrd/report/tableTitle?userId=111&sectionId="+sectionId,type:"Get",async:true,success:function(data){data=eval("("+data+")");
if(data.result==""){$("#main11119300").append('<div class="tip">暂时无数据</div>');}headLength=data.result.length;var tableTip='<div class="tableTip">加载中...</div>';
$("#main11119300").append(tableTip);$.ajax({url:"http://112.74.96.24:8082/mt-gzrd/report/tableContent?userId=111&sectionId="+sectionId,type:"Get",async:true,success:function(res){$(".tableTip").remove();
res=eval("("+res+")");function table(data,res,bb){$(".tableConten ").remove();tab="";var tab=' <div class="tableConten clearfix" ><span class="tableDw">单位:万元</span>                    <div class="t_n">                        <span class="table_lh">'+data.result[1].colName+'</span>                        <div class="dd ddt '+bb+'1">                            <table cellpadding="0" cellspacing="0" border="0" class="t_number">                                <tbody class="table_list">                                    <tr>                                    </tr>                                                                                                       </tbody>                            </table>                        </div>                        <span class="total" style="display:none">总计</span>                    </div>                    <!--table-->                    <div class="t_i">                        <div class="t_i_h '+bb+'h">                            <div class="ee">                                <table cellpadding="0" cellspacing="0" border="0" class="ltb01">                                    <tr class="table_hi">                                    </tr>                                </table>                            </div>                        </div>                        <div class="cc tabcc '+bb+'"  >                            <table cellpadding="0" cellspacing="0" border="0" class="tableC">                            </table>                        </div>                        <!-- 总数 -->                        <div class="t_i_h hh2 '+bb+'h2" style="display:none">                            <div class="ee">                                <table cellpadding="0" cellspacing="0" border="0" class="ltb">                                    <tr>                                        <td style="width: 120px" class="table_hi2">45.515.151.66</td>                                        <td style="width: 120px">41.115.151.12</td>                                        <td style="width: 120px">35.515.151.33</td>                                        <td style="width: 120px">45.585.173.68</td>                                        <td style="width: 120px">55.515.151.60</td>                                        <td style="width: 120px">35.615.051.66</td>                                    </tr>                                </table>                            </div>                        </div>                    </div>                </div>';
tabList="";trList="";tabHeader="";for(i=0;i<res.result.length;i++){if(res.result[i].from_data_id!=null){from_data_id=res.result[i].from_data_id;}else{from_data_id=res.result[i].from_data_id;
}colname=res.result[i].col2;if(colname!="null"){cc=colname;}else{cc="0.00";}tabList+='<td data-form="'+from_data_id+'">'+cc+"</td>";colNum=i;}for(i=2;i<data.result.length;
i++){tabHeader+="<td>"+data.result[i].colName+"</td>";}for(i=0;i<res.result.length;i++){trList+='<tr class="colClass">'+i+"</tr>";}$("#main11119300").append(tab);
$(".table_list tr").append(tabList);$(".tableC").append(trList);$(".table_hi").append(tabHeader);for(i=0;i<res.result.length;i++){if(res.result[i].from_data_id!=null){from_data_id=res.result[i].from_data_id;
}else{from_data_id=res.result[i].from_data_id;}for(a=3;a<headLength+1;a++){dataCol="res.result[i].col"+a;ccl=eval(dataCol);if(ccl!="null"){var cclData=ccl;
}else{var cclData="0.00";}$(".tableC tr").eq(i).append('<td data-form="'+from_data_id+'">'+cclData+"</td>");}}}table(data,res,1);function tabys(bb,widTh){var tbArray=$(".hh2").find("td");
var tdLength=$(".colClass").eq("0").children("td").length;widthLength=tdLength*210+"px";$(".ltb01").attr("width",widthLength);$(".ltb").attr("width",widthLength);
$(".tableC").attr("width",tdLength*210+"px");$(".tableC td").width("198px");$(".ltb01 td").width("200px");$(".tableConten  td").height("24px");$(".tableConten  td").css("line-height","24px");
$(".table_lh").height("24px");$(".table_lh").css("line-height","24px");}tabys();$(".tabcc").scroll(function(){var a=$(this).scrollTop();var b=$(this).scrollLeft();
$(".ddt").scrollTop(a);$(".t_i_h").scrollLeft(b);if(a==$(".tableC").height()-500){console.log("到底了");$.ajax({url:"http://112.74.96.24:8082/mt-gzrd/report/tableContent?userId=111&sectionId="+sectionId,type:"Get",async:true,success:function(res){res=eval("("+res+")");
tabList="";trList="";for(var i=0;i<res.result.length;i++){if(res.result[i].from_data_id!=null){from_data_id=res.result[i].from_data_id;}else{from_data_id=res.result[i].from_data_id;
}colname=res.result[i].col2;if(colname!="null"){cc=colname;}else{cc="0.00";}tabList+='<td data-form="'+from_data_id+'">'+cc+"</td>";colNum=i;}for(var i=2;
i<data.result.length;i++){tabHeader+="<td>"+data.result[i].colName+"</td>";}for(var i=0;i<res.result.length;i++){}for(var i=0;i<res.result.length;i++){var trL="";
if(res.result[i].from_data_id!=null){from_data_id=res.result[i].from_data_id;}else{from_data_id=res.result[i].from_data_id;}console.log(headLength);for(a=3;
a<headLength+1;a++){var tdCon="";dataCol="res.result[i].col"+a;ccl=eval(dataCol);if(ccl!="null"){var cclData=ccl;}else{var cclData="0.00";}tdCon+='<td data-form="'+from_data_id+'">'+cclData+"</td>";
}trL+="<tr>"+tdCon+"</tr>";}$(".tabcc").scroll(function(){var a=$(this).scrollTop();var b=$(this).scrollLeft();$(".ddt").scrollTop(a);$(".t_i_h").scrollLeft(b);
});}});return;}});$(".line ").css({width:"100%",height:"6.5rem"});document.body.className="";$(".page").css("display","none");$(".page").eq("0").css("display","block");
$(".page").children("div:last-child").remove();$(".curtain").remove();$("td").click(function(){if($(this).attr("data-form").length>3){window.location.href="./table.html?sectionId="+$(this).attr("data-form")+"&sectionName="+getQueryString("sectionName");
}});}});},error:function(XMLHttpRequest,textStatus,errorThrown){layer.open({content:"请求超时,请重新加载",btn:["重新加载"],yes:function(index){location.reload();}});
},complete:function(XMLHttpRequest,status){if(status=="timeout"){layTip("请求超时,请重新打开");}}});}};